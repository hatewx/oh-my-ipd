---
name: ipd-status
description: |
  查看当前 IPD-OMO 项目的完整状态。
  显示项目进度、TR 状态、各角色任务完成情况、风险和决策建议。
arguments:
  - name: detail_level
    description: 详情级别 (summary/detailed)
    required: false
    default: summary
---

# IPD-OMO 项目状态查询

作为 LPDT，我需要提供项目的完整状态视图。

## 状态收集流程

### 步骤 1: 读取项目状态文件
读取 `.claude/project-state.md` 获取：
- 项目基本信息
- 当前阶段和迭代
- 历史 TR 记录
- 已知的阻塞和风险

### 步骤 2: 收集各角色状态
根据 detail_level，收集各角色状态：
- **summary**: 仅显示各角色的任务完成状态
- **detailed**: 显示详细的任务内容和阻塞原因

### 步骤 3: 生成状态报告
生成结构化的状态报告。

## 输出格式

### Summary 级别输出
```
╔════════════════════════════════════════════════════════════╗
║  IPD-OMO 项目状态                                          ║
╠════════════════════════════════════════════════════════════╣
║  项目: [name] | 阶段: [phase] | 迭代: [N/M]                ║
╠════════════════════════════════════════════════════════════╣
║  健康度仪表盘                                              ║
║  进度: [🟢🟢🟢🟡⚪] 75%                                    ║
║  质量: [🟢🟢🟢🟢⚪] 90%                                    ║
║  成本: [🟢🟢🟡⚪⚪] 60%                                    ║
╠════════════════════════════════════════════════════════════╣
║  PDT 团队状态                                              ║
║  ├─ LPDT: [监控中]                                         ║
║  ├─ PDU:  [Charter 已确认]                                 ║
║  ├─ SE:   [LLD 已完成]                                     ║
║  ├─ Dev:  [实现中]                                         ║
║  ├─ PQA:  [等待提交]                                       ║
║  └─ TMM:  [等待提交]                                       ║
╠════════════════════════════════════════════════════════════╣
║  当前阻塞                                                  ║
║  • [如果有]: [阻塞原因]                                    ║
╠════════════════════════════════════════════════════════════╣
║  下一步行动                                                ║
║  • [行动建议]                                              ║
╚════════════════════════════════════════════════════════════╝
```

### Detailed 级别输出
在 Summary 基础上增加：
- 详细的 TR 历史
- 各角色的详细任务列表
- Token 消耗明细
- 风险矩阵
- 建议的决策

## 交互支持

如果用户查询状态时遇到问题，主动提供：
1. **状态缺失**: 提示使用 `ipd-start` 初始化项目
2. **状态过期**: 提示状态文件可能需要更新
3. **阻塞求助**: 根据阻塞类型提供解决方案

## 执行指令

请按以下步骤执行：
1. 读取 `.claude/project-state.md`
2. 根据 detail_level 格式化输出
3. 分析当前状态并提供下一步建议
4. 如果有阻塞，明确标识并建议解决方案
